{
  "version": 3,
  "sources": ["projects/client/src/app/core/services/cart.service.ts", "projects/client/src/app/constants/api-endpoints.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { CartItem } from '@models/menu-item.model';\nimport { StorageService } from './storage.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CartService {\n  private cartItemsSubject: BehaviorSubject<CartItem[]>;\n  public cartItems$: Observable<CartItem[]>;\n  private readonly CART_STORAGE_KEY = 'cart_items';\n\n  constructor(private storageService: StorageService) {\n    const savedCart = this.storageService.getObject<CartItem[]>(this.CART_STORAGE_KEY) || [];\n    this.cartItemsSubject = new BehaviorSubject<CartItem[]>(savedCart);\n    this.cartItems$ = this.cartItemsSubject.asObservable();\n  }\n\n  /**\n   * Get current cart items\n   */\n  get cartItems(): CartItem[] {\n    return this.cartItemsSubject.value;\n  }\n\n  /**\n   * Get cart item count\n   */\n  get cartItemCount(): number {\n    return this.cartItems.reduce((total, item) => total + item.quantity, 0);\n  }\n\n  /**\n   * Get cart total\n   */\n  get cartTotal(): number {\n    return this.cartItems.reduce((total, item) => total + (item.price * item.quantity), 0);\n  }\n\n  /**\n   * Add item to cart\n   */\n  addToCart(item: CartItem): void {\n    const currentCart = [...this.cartItems];\n    const existingItemIndex = currentCart.findIndex(\n      cartItem =>\n        cartItem.menuItemId === item.menuItemId &&\n        cartItem.portionId === item.portionId &&\n        cartItem.portionDetailId === item.portionDetailId\n    );\n\n    if (existingItemIndex > -1) {\n      // Update quantity if item already exists\n      currentCart[existingItemIndex].quantity += item.quantity;\n    } else {\n      // Add new item\n      currentCart.push(item);\n    }\n\n    this.updateCart(currentCart);\n  }\n\n  /**\n   * Remove item from cart\n   */\n  removeFromCart(menuItemId: number, portionId: number, portionDetailId: number): void {\n    const currentCart = this.cartItems.filter(\n      item =>\n        !(item.menuItemId === menuItemId &&\n          item.portionId === portionId &&\n          item.portionDetailId === portionDetailId)\n    );\n    this.updateCart(currentCart);\n  }\n\n  /**\n   * Update item quantity\n   */\n  updateQuantity(menuItemId: number, portionId: number, portionDetailId: number, quantity: number): void {\n    if (quantity <= 0) {\n      this.removeFromCart(menuItemId, portionId, portionDetailId);\n      return;\n    }\n\n    const currentCart = this.cartItems.map(item => {\n      if (\n        item.menuItemId === menuItemId &&\n        item.portionId === portionId &&\n        item.portionDetailId === portionDetailId\n      ) {\n        return { ...item, quantity };\n      }\n      return item;\n    });\n\n    this.updateCart(currentCart);\n  }\n\n  /**\n   * Clear cart\n   */\n  clearCart(): void {\n    this.updateCart([]);\n  }\n\n  /**\n   * Update cart and persist to storage\n   */\n  private updateCart(cart: CartItem[]): void {\n    this.cartItemsSubject.next(cart);\n    this.storageService.setObject(this.CART_STORAGE_KEY, cart);\n  }\n}\n\n", "export const API_ENDPOINTS = {\n  AUTH: {\n    LOGIN: '/auth/login',\n    REGISTER: '/auth/register',\n    LOGOUT: '/auth/logout',\n    REFRESH: '/auth/refresh',\n    FORGOT_PASSWORD: '/auth/forgot-password',\n    RESET_PASSWORD: '/auth/reset-password',\n    CHANGE_PASSWORD: '/auth/change-password',\n    VERIFY_EMAIL: '/auth/verify-email'\n  },\n  USER: {\n    PROFILE: '/user/profile',\n    UPDATE: '/user/update',\n    UPDATE_AVATAR: '/user/avatar',\n    DELETE: '/user/delete'\n  },\n  MENU_ITEMS: {\n    LIST: '/MenuItems',\n    DETAIL: (id: number) => `/MenuItems/${id}`,\n    BY_CATEGORY: (categoryId: number) => `/MenuItems/category/${categoryId}`\n  },\n  CATEGORIES: {\n    LIST: '/Categories',\n    DETAIL: (id: number) => `/Categories/${id}`\n  }\n};\n\n"],
  "mappings": ";;;;;;;;;;;;AAQM,IAAO,cAAP,MAAO,aAAW;EAKF;EAJZ;EACD;EACU,mBAAmB;EAEpC,YAAoB,gBAA8B;AAA9B,SAAA,iBAAA;AAClB,UAAM,YAAY,KAAK,eAAe,UAAsB,KAAK,gBAAgB,KAAK,CAAA;AACtF,SAAK,mBAAmB,IAAI,gBAA4B,SAAS;AACjE,SAAK,aAAa,KAAK,iBAAiB,aAAY;EACtD;;;;EAKA,IAAI,YAAS;AACX,WAAO,KAAK,iBAAiB;EAC/B;;;;EAKA,IAAI,gBAAa;AACf,WAAO,KAAK,UAAU,OAAO,CAAC,OAAO,SAAS,QAAQ,KAAK,UAAU,CAAC;EACxE;;;;EAKA,IAAI,YAAS;AACX,WAAO,KAAK,UAAU,OAAO,CAAC,OAAO,SAAS,QAAS,KAAK,QAAQ,KAAK,UAAW,CAAC;EACvF;;;;EAKA,UAAU,MAAc;AACtB,UAAM,cAAc,CAAC,GAAG,KAAK,SAAS;AACtC,UAAM,oBAAoB,YAAY,UACpC,cACE,SAAS,eAAe,KAAK,cAC7B,SAAS,cAAc,KAAK,aAC5B,SAAS,oBAAoB,KAAK,eAAe;AAGrD,QAAI,oBAAoB,IAAI;AAE1B,kBAAY,iBAAiB,EAAE,YAAY,KAAK;IAClD,OAAO;AAEL,kBAAY,KAAK,IAAI;IACvB;AAEA,SAAK,WAAW,WAAW;EAC7B;;;;EAKA,eAAe,YAAoB,WAAmB,iBAAuB;AAC3E,UAAM,cAAc,KAAK,UAAU,OACjC,UACE,EAAE,KAAK,eAAe,cACpB,KAAK,cAAc,aACnB,KAAK,oBAAoB,gBAAgB;AAE/C,SAAK,WAAW,WAAW;EAC7B;;;;EAKA,eAAe,YAAoB,WAAmB,iBAAyB,UAAgB;AAC7F,QAAI,YAAY,GAAG;AACjB,WAAK,eAAe,YAAY,WAAW,eAAe;AAC1D;IACF;AAEA,UAAM,cAAc,KAAK,UAAU,IAAI,UAAO;AAC5C,UACE,KAAK,eAAe,cACpB,KAAK,cAAc,aACnB,KAAK,oBAAoB,iBACzB;AACA,eAAO,iCAAK,OAAL,EAAW,SAAQ;MAC5B;AACA,aAAO;IACT,CAAC;AAED,SAAK,WAAW,WAAW;EAC7B;;;;EAKA,YAAS;AACP,SAAK,WAAW,CAAA,CAAE;EACpB;;;;EAKQ,WAAW,MAAgB;AACjC,SAAK,iBAAiB,KAAK,IAAI;AAC/B,SAAK,eAAe,UAAU,KAAK,kBAAkB,IAAI;EAC3D;;qCAxGW,cAAW,mBAAA,cAAA,CAAA;EAAA;4EAAX,cAAW,SAAX,aAAW,WAAA,YAFV,OAAM,CAAA;;;sEAEP,aAAW,CAAA;UAHvB;WAAW;MACV,YAAY;KACb;;;;;ACPM,IAAM,gBAAgB;EAC3B,MAAM;IACJ,OAAO;IACP,UAAU;IACV,QAAQ;IACR,SAAS;IACT,iBAAiB;IACjB,gBAAgB;IAChB,iBAAiB;IACjB,cAAc;;EAEhB,MAAM;IACJ,SAAS;IACT,QAAQ;IACR,eAAe;IACf,QAAQ;;EAEV,YAAY;IACV,MAAM;IACN,QAAQ,CAAC,OAAe,cAAc,EAAE;IACxC,aAAa,CAAC,eAAuB,uBAAuB,UAAU;;EAExE,YAAY;IACV,MAAM;IACN,QAAQ,CAAC,OAAe,eAAe,EAAE;;;",
  "names": []
}
