{
  "version": 3,
  "sources": ["projects/client/src/app/core/services/menu-item.service.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ApiService } from './api.service';\nimport { API_ENDPOINTS } from '@constants/api-endpoints';\nimport { MenuItem, MenuItemDetail, PaginationRequest, PagedResult } from '@models/menu-item.model';\nimport { ApiResponse } from '@models/api-response.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MenuItemService {\n  constructor(private apiService: ApiService) {}\n\n  /**\n   * Get all menu items with pagination\n   */\n  getMenuItems(request?: PaginationRequest): Observable<ApiResponse<PagedResult<MenuItem>>> {\n    const params: any = {};\n    if (request?.page) params.pageNumber = request.page;\n    if (request?.limit) params.pageSize = request.limit;\n    if (request?.search) params.searchTerm = request.search;\n    if (request?.sortBy) params.sortBy = request.sortBy;\n    if (request?.sortOrder) params.sortDescending = request.sortOrder === 'desc';\n\n    return this.apiService.get<PagedResult<MenuItem>>(API_ENDPOINTS.MENU_ITEMS.LIST, { params });\n  }\n\n  /**\n   * Get menu item by ID\n   */\n  getMenuItemById(id: number): Observable<ApiResponse<MenuItemDetail>> {\n    return this.apiService.get<any>(API_ENDPOINTS.MENU_ITEMS.DETAIL(id)).pipe(\n      map((response: ApiResponse<any>) => {\n        if (response.success && response.data) {\n          // Map API response to frontend model (handle case sensitivity)\n          const apiData = response.data;\n          const mappedData: MenuItemDetail = {\n            id: apiData.id,\n            categoryId: apiData.categoryId,\n            categoryName: apiData.categoryName || '',\n            name: apiData.name,\n            description: apiData.description,\n            baseImageUrl: apiData.baseImageUrl,\n            isAvailable: apiData.isAvailable,\n            preparationTime: apiData.preparationTime,\n            createdAt: apiData.createdAt,\n            updatedAt: apiData.updatedAt,\n            createdBy: apiData.createdBy,\n            updatedBy: apiData.updatedBy,\n            portionCount: (apiData.Portions || apiData.portions || []).length,\n            portions: (apiData.Portions || apiData.portions || []).map((p: any) => ({\n              id: p.id,\n              menuItemId: p.menuItemId,\n              menuItemName: p.menuItemName || apiData.name,\n              name: p.name,\n              description: p.description,\n              imageUrl: p.imageUrl,\n              isActive: p.isActive,\n              displayOrder: p.displayOrder,\n              minSelection: p.minSelection,\n              maxSelection: p.maxSelection,\n              createdAt: p.createdAt,\n              updatedAt: p.updatedAt,\n              portionDetails: (p.PortionDetails || p.portionDetails || []).map((pd: any) => ({\n                id: pd.id,\n                name: pd.name,\n                price: pd.price\n              }))\n            }))\n          };\n          return {\n            ...response,\n            data: mappedData\n          } as ApiResponse<MenuItemDetail>;\n        }\n        return response as ApiResponse<MenuItemDetail>;\n      })\n    );\n  }\n\n  /**\n   * Get menu items by category\n   */\n  getMenuItemsByCategory(categoryId: number): Observable<ApiResponse<MenuItem[]>> {\n    return this.apiService.get<MenuItem[]>(API_ENDPOINTS.MENU_ITEMS.BY_CATEGORY(categoryId));\n  }\n\n  /**\n   * Get full image URL\n   */\n  getImageUrl(imageUrl?: string): string {\n    if (!imageUrl) {\n      return '/assets/i18n/placeholder-food.png'; // Placeholder image\n    }\n    // If imageUrl is already a full URL, return it\n    if (imageUrl.startsWith('http://') || imageUrl.startsWith('https://')) {\n      return imageUrl;\n    }\n    // Otherwise, construct the full URL\n    const apiUrl = 'http://localhost:5071';\n    return `${apiUrl}${imageUrl}`;\n  }\n}\n\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAWM,IAAO,kBAAP,MAAO,iBAAe;EACN;EAApB,YAAoB,YAAsB;AAAtB,SAAA,aAAA;EAAyB;;;;EAK7C,aAAa,SAA2B;AACtC,UAAM,SAAc,CAAA;AACpB,QAAI,SAAS;AAAM,aAAO,aAAa,QAAQ;AAC/C,QAAI,SAAS;AAAO,aAAO,WAAW,QAAQ;AAC9C,QAAI,SAAS;AAAQ,aAAO,aAAa,QAAQ;AACjD,QAAI,SAAS;AAAQ,aAAO,SAAS,QAAQ;AAC7C,QAAI,SAAS;AAAW,aAAO,iBAAiB,QAAQ,cAAc;AAEtE,WAAO,KAAK,WAAW,IAA2B,cAAc,WAAW,MAAM,EAAE,OAAM,CAAE;EAC7F;;;;EAKA,gBAAgB,IAAU;AACxB,WAAO,KAAK,WAAW,IAAS,cAAc,WAAW,OAAO,EAAE,CAAC,EAAE,KACnE,IAAI,CAAC,aAA8B;AACjC,UAAI,SAAS,WAAW,SAAS,MAAM;AAErC,cAAM,UAAU,SAAS;AACzB,cAAM,aAA6B;UACjC,IAAI,QAAQ;UACZ,YAAY,QAAQ;UACpB,cAAc,QAAQ,gBAAgB;UACtC,MAAM,QAAQ;UACd,aAAa,QAAQ;UACrB,cAAc,QAAQ;UACtB,aAAa,QAAQ;UACrB,iBAAiB,QAAQ;UACzB,WAAW,QAAQ;UACnB,WAAW,QAAQ;UACnB,WAAW,QAAQ;UACnB,WAAW,QAAQ;UACnB,eAAe,QAAQ,YAAY,QAAQ,YAAY,CAAA,GAAI;UAC3D,WAAW,QAAQ,YAAY,QAAQ,YAAY,CAAA,GAAI,IAAI,CAAC,OAAY;YACtE,IAAI,EAAE;YACN,YAAY,EAAE;YACd,cAAc,EAAE,gBAAgB,QAAQ;YACxC,MAAM,EAAE;YACR,aAAa,EAAE;YACf,UAAU,EAAE;YACZ,UAAU,EAAE;YACZ,cAAc,EAAE;YAChB,cAAc,EAAE;YAChB,cAAc,EAAE;YAChB,WAAW,EAAE;YACb,WAAW,EAAE;YACb,iBAAiB,EAAE,kBAAkB,EAAE,kBAAkB,CAAA,GAAI,IAAI,CAAC,QAAa;cAC7E,IAAI,GAAG;cACP,MAAM,GAAG;cACT,OAAO,GAAG;cACV;YACF;;AAEJ,eAAO,iCACF,WADE;UAEL,MAAM;;MAEV;AACA,aAAO;IACT,CAAC,CAAC;EAEN;;;;EAKA,uBAAuB,YAAkB;AACvC,WAAO,KAAK,WAAW,IAAgB,cAAc,WAAW,YAAY,UAAU,CAAC;EACzF;;;;EAKA,YAAY,UAAiB;AAC3B,QAAI,CAAC,UAAU;AACb,aAAO;IACT;AAEA,QAAI,SAAS,WAAW,SAAS,KAAK,SAAS,WAAW,UAAU,GAAG;AACrE,aAAO;IACT;AAEA,UAAM,SAAS;AACf,WAAO,GAAG,MAAM,GAAG,QAAQ;EAC7B;;qCA3FW,kBAAe,mBAAA,UAAA,CAAA;EAAA;4EAAf,kBAAe,SAAf,iBAAe,WAAA,YAFd,OAAM,CAAA;;;sEAEP,iBAAe,CAAA;UAH3B;WAAW;MACV,YAAY;KACb;;;",
  "names": []
}
