<div class="menu-container">

  <!-- Slider Section -->
  <div class="slider-container" *ngIf="sliderImages && sliderImages.length > 0">
    <div class="slider-wrapper">
      <button class="slider-nav-btn slider-prev" (click)="prevSlide()" aria-label="Previous slide" type="button">
        <i class="bi bi-chevron-left"></i>
      </button>
      
      <div class="slider-content">
        <div 
          class="slider-slide" 
          *ngFor="let image of sliderImages; let i = index"
          [class.active]="i === currentSlideIndex"
        >
          <img 
            [src]="getSliderImageUrl(image)" 
            [alt]="'Slide ' + (i + 1)"
            (error)="onImageError($event)"
            loading="eager"
          />
        </div>
      </div>
      
      <button class="slider-nav-btn slider-next" (click)="nextSlide()" aria-label="Next slide" type="button">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
    
    <!-- Slider Indicators -->
    <div class="slider-indicators">
      <button 
        *ngFor="let image of sliderImages; let i = index"
        class="slider-indicator"
        [class.active]="i === currentSlideIndex"
        (click)="goToSlide(i)"
        [attr.aria-label]="'Go to slide ' + (i + 1)"
        type="button"
      ></button>
    </div>
  </div>

  <!-- Category Tabs Section -->
  <div class="category-tabs-section" *ngIf="categories.length > 0">
    <div class="category-tabs-container">
      <button
        class="category-tab"
        [class.active]="activeCategoryId === null"
        (click)="selectCategory(null)"
        type="button"
      >
        All
      </button>
      <button
        *ngFor="let category of categories"
        class="category-tab"
        [class.active]="activeCategoryId === category.id"
        (click)="selectCategory(category.id)"
        type="button"
      >
        {{ category.name }}
      </button>
      <div class="category-arrow">
        <i class="bi bi-chevron-right"></i>
      </div>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-2">Loading menu items...</p>
  </div>

  <!-- Category Sections -->
  <div *ngIf="!loading && categorySections.length > 0" class="menu-content-wrapper">
    <div class="menu-sections">
      
      <div *ngFor="let section of categorySections" class="category-section" [id]="'category-' + section.category.id">
        
        <!-- Category Heading -->
        <h2 class="category-heading">{{ section.category.name }}</h2>
        
        <!-- Deals Grid for this Category -->
        <div class="deal-grid">
          <div *ngFor="let item of section.items" class="deal-card">
            
            <!-- LEFT: Image -->
            <div class="deal-image">
              <img 
                [src]="getImageUrl(item.baseImageUrl)" 
                [alt]="item.name"
                (error)="onImageError($event)"
              />
            </div>

            <!-- RIGHT: Content -->
            <div class="deal-content">
              <div class="deal-header">
                <h3 class="deal-title">{{ item.name }}</h3>
              </div>

              <p class="deal-desc">
                {{ item.description || 'Delicious food item with great taste.' }}
              </p>

              <div class="deal-price">
                <span *ngIf="getItemPrice(item.id)">{{ formatPrice(getItemPrice(item.id)!) }}</span>
                <span *ngIf="!getItemPrice(item.id)" class="price-loading">Loading price...</span>
              </div>
              
              <div class="deal-footer">
                <button 
                  class="deal-btn" 
                  (click)="addToCart(item)"
                  [disabled]="!item.isAvailable"
                >
                  Add To Cart
                </button>
                <button 
                  class="fav-btn"
                  (click)="toggleFavorite(item.id)"
                  [class.active]="isFavorite(item.id)"
                >
                  <i class="bi" 
                     [class.bi-heart]="!isFavorite(item.id)" 
                     [class.bi-heart-fill]="isFavorite(item.id)">
                  </i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && categorySections.length === 0 && menuItems.length === 0" class="empty">
    <i class="bi bi-inbox fs-1 text-muted"></i>
    <h3>No menu items found</h3>
  </div>
</div>
